{% extends "base.html" %}

{% block title %}Select a Persona{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="text-center mb-5">
    <h1 class="display-4 mb-3">Choose a Persona to Chat With</h1>
    <p class="lead text-muted mb-0">Select one of the classic personas below or create your own custom AI companion.</p>
</div>

<!-- Personas Grid -->
<div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
    {% for name, persona in personas.items() %}
    <div class="col">
        <div class="card h-100 persona-card">
            <div class="position-relative overflow-hidden text-center pt-4">
                <img src="{{ persona.image_url }}" class="persona-avatar" alt="{{ persona.name }}"
                     onerror="this.onerror=null;this.src='/static/img/default-avatar.svg';">
                <div class="position-absolute top-0 end-0 m-2">
                    <span class="badge bg-primary bg-opacity-75 rounded-pill">
                        <i class="bi bi-circle-fill me-1"></i>Online
                    </span>
                </div>
            </div>
            <div class="card-body d-flex flex-column">
                <h5 class="card-title">{{ persona.name }}</h5>
                <p class="card-text small text-muted mb-3">
                    {% if persona.name == 'Albert Einstein' %}
                        <i class="bi bi-lightbulb me-1"></i>Physicist and philosopher
                    {% endif %}
                    {% if persona.name == 'Sherlock Holmes' %}
                        <i class="bi bi-search me-1"></i>Consulting detective
                    {% endif %}
                    {% if persona.name == 'Franz Kafka' %}
                        <i class="bi bi-pen me-1"></i>Novelist and absurdist
                    {% endif %}
                    {% if persona.name == 'Walter White' %}
                        <i class="bi bi-flask me-1"></i>Chemistry teacher, entrepreneur
                    {% endif %}
                    {% if 'CustomPersona' in persona.__class__.__name__ %}
                        <i class="bi bi-person-gear me-1"></i>User-created persona
                    {% endif %}
                </p>
                <a href="/chat/{{ persona.name }}" class="btn btn-primary mt-auto">
                    <i class="bi bi-chat-dots me-2"></i>Chat with {{ persona.name }}
                </a>
            </div>
        </div>
    </div>
    {% endfor %}

    <!-- Create New Card -->
    <div class="col">
        <div class="card h-100 persona-card-create">
            <div class="card-body text-center d-flex flex-column justify-content-center p-4">
                <div class="mb-3">
                    <i class="bi bi-plus-circle display-1"></i>
                </div>
                <h5 class="card-title mb-3">Create a Custom Persona</h5>
                <p class="card-text small text-muted mb-4">
                    Build a new AI chat partner from any Wikipedia article. 
                    Define their personality and characteristics.
                </p>
                <a href="/create" class="btn btn-success mt-auto">
                    <i class="bi bi-magic me-2"></i>Create New Persona
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Features Section -->
<div class="row mt-5 pt-5">
    <div class="col-12">
        <h3 class="text-center mb-4">Why Choose AI Personas?</h3>
    </div>
    <div class="col-md-4 text-center mb-4">
        <div class="p-3">
            <i class="bi bi-brain display-4 text-primary mb-3"></i>
            <h5>Intelligent Conversations</h5>
            <p class="text-muted">Powered by advanced RAG technology for contextually aware responses.</p>
        </div>
    </div>
    <div class="col-md-4 text-center mb-4">
        <div class="p-3">
            <i class="bi bi-person-plus display-4 text-success mb-3"></i>
            <h5>Custom Personas</h5>
            <p class="text-muted">Create your own AI companions based on any Wikipedia personality.</p>
        </div>
    </div>
    <div class="col-md-4 text-center mb-4">
        <div class="p-3">
            <i class="bi bi-lightning display-4 text-warning mb-3"></i>
            <h5>Instant Setup</h5>
            <p class="text-muted">Quick and easy persona creation with automatic knowledge base building.</p>
        </div>
    </div>
</div>
{% endblock %}